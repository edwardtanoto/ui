{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "button",
  "type": "registry:ui",
  "title": "Button",
  "description": "Primary interactive button with dither animation and hotkey support.",
  "dependencies": [
    "@radix-ui/react-slot",
    "class-variance-authority"
  ],
  "files": [
    {
      "path": "registry/new-york/ui/button.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium font-mono uppercase rounded-[2px] ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive: \"bg-destructive text-white hover:bg-destructive/90\",\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 px-3\",\n        lg: \"h-11 px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nfunction getDitherColor(variant: string | null | undefined): string {\n  switch (variant) {\n    case \"secondary\":\n      return \"rgba(0, 0, 0, 0.15)\"\n    case \"destructive\":\n      return \"rgba(255, 255, 255, 0.25)\"\n    default:\n      return \"rgba(255, 255, 255, 0.15)\"\n  }\n}\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n  dither?: boolean\n  hotkey?: string\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, dither = false, hotkey, children, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    const buttonRef = React.useRef<HTMLButtonElement>(null)\n    const canvasRef = React.useRef<HTMLCanvasElement>(null)\n    const [isHovered, setIsHovered] = React.useState(false)\n    const animationRef = React.useRef<number>(0)\n    const progressRef = React.useRef(0)\n\n    React.useImperativeHandle(ref, () => buttonRef.current!)\n\n    React.useEffect(() => {\n      if (!dither || !canvasRef.current || !buttonRef.current) return\n\n      const canvas = canvasRef.current\n      const ctx = canvas.getContext(\"2d\")\n      if (!ctx) return\n\n      const updateCanvasSize = () => {\n        const rect = buttonRef.current!.getBoundingClientRect()\n        canvas.width = rect.width\n        canvas.height = rect.height\n      }\n\n      updateCanvasSize()\n\n      const bayerMatrix = [\n        [0, 8, 2, 10],\n        [12, 4, 14, 6],\n        [3, 11, 1, 9],\n        [15, 7, 13, 5],\n      ]\n\n      const ditherColor = getDitherColor(variant)\n\n      const drawDither = (progress: number) => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n        const pixelSize = 3\n        const threshold = progress * 16\n\n        for (let y = 0; y < canvas.height; y += pixelSize) {\n          for (let x = 0; x < canvas.width; x += pixelSize) {\n            const matrixX = Math.floor(x / pixelSize) % 4\n            const matrixY = Math.floor(y / pixelSize) % 4\n            const ditherValue = bayerMatrix[matrixY][matrixX]\n\n            if (ditherValue < threshold) {\n              ctx.fillStyle = ditherColor\n              ctx.fillRect(x, y, pixelSize, pixelSize)\n            }\n          }\n        }\n      }\n\n      const animate = () => {\n        const targetProgress = isHovered ? 1 : 0\n        const speed = 0.08\n\n        progressRef.current += (targetProgress - progressRef.current) * speed\n\n        if (Math.abs(targetProgress - progressRef.current) > 0.01) {\n          drawDither(progressRef.current)\n          animationRef.current = requestAnimationFrame(animate)\n        } else {\n          progressRef.current = targetProgress\n          drawDither(progressRef.current)\n        }\n      }\n\n      animationRef.current = requestAnimationFrame(animate)\n\n      return () => {\n        cancelAnimationFrame(animationRef.current)\n      }\n    }, [isHovered, dither, variant])\n\n    const HotkeyBadge = hotkey ? (\n      <span className=\"ml-2 inline-flex items-center justify-center rounded-[2px] border border-current/20 bg-current/10 px-1.5 py-0.5 text-[10px] font-mono uppercase leading-none\">\n        {hotkey}\n      </span>\n    ) : null\n\n    if (!dither) {\n      if (asChild) {\n        return (\n          <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props}>\n            {children}\n          </Comp>\n        )\n      }\n      return (\n        <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props}>\n          {children}\n          {HotkeyBadge}\n        </Comp>\n      )\n    }\n\n    return (\n      <button\n        ref={buttonRef}\n        className={cn(buttonVariants({ variant, size, className }), \"relative overflow-hidden\")}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n        {...props}\n      >\n        <canvas ref={canvasRef} className=\"pointer-events-none absolute inset-0\" />\n        <span className=\"relative z-10 inline-flex items-center\">\n          {children}\n          {HotkeyBadge}\n        </span>\n      </button>\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n",
      "type": "registry:ui"
    }
  ]
}